---
title: "Project Name"
author: "kattur"
date: ""
output: html_document

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_knit$set(root.dir = getwd())
library(DT)
library(raster)
library(knitr)
library(stringr)
library(dplyr)
library(kableExtra)
```


## Location of Phytophthora~host interactions

Here we provide tables showing the locations of Phytophthora~host interactions currently listed within our database, along with the pertinent number of records.

Separate sets of tables are provided for records from Scotland only, records from the UK (including Scotland), and global (excluding UK) records. 

Combinations of Phytopthora species and host can be viewed at either host species or genus rank by selecting the relevant option from the drop down menu on each tab.

Additionally, you can search by Phytopthora species name, plant host name or location using the search box.

For ease of reference, if the combination of Phytopthora species and host has been recorded in Scotland, this is indicated as 'Yes' within the final column of the 'global' tables.


We have used the [World Geographical Scheme for Recording Plant Distributions](<https://www.tdwg.org/standards/wgsrpd/>) as the geographic location standard. The WGSRPD uses four levels which approximate to four geographic scales as follows;

Level 1 ~ continental

Level 2 ~ regional

Level 3 ~ 'botanical country' (which does not always reflect political boundaries),

Level 4 ~ a 'basic recording unit' - often the same as Level 3, but may be a state or province in cases where the Level 3 is large.




### Scotland and UK data tables

The 'United Kingdom' is not a WGSRPD level. Records relating to the UK may be allocated to Level 4 'Northern Ireland' (which forms part of Level 3 'Ireland'), Level 4 and Level 3 'Great Britain' (if from England, Scotland, Wales or the Isle of Man), or Level 4 'Channel Is.' (which forms part of Level 3 'France'). 

In many instances, datasets that have been compiled to form the current phytophthora~host database, have included records for which the location given is 'United Kingdom'. With no additional location details available we are not able to standardise the location of such records using the WGSRPD. 

For these reasons, when preparing the 'UK' tables, we have not only included records standardised to Level 4 as 'Great Britain' or 'Northern Ireland', but also any record that has been identified as being from the United Kingdom.

Records have been allocated to 'England', 'Scotland, 'Wales' or 'N.Ireland', either by use of a coordinate reference for a record (if provided), or where there was a named location for that record that allowed such an allocation. 

The number of records identified as being from the UK but that cannot be identified as being from England, Wales, Scotland or N.Ireland, is given in the 'Nation.unknown' column of the 'UK' tables.


### Global data tables

Global tables are provided through four tabs. This is to allow for analysis of the data grouped at different WGSRPD levels.

The 'Global Level 4' tab, shows the data grouped by 'Phytopthora~host~location' combination. Note that not all 'Phytopthora~host~location' combinations on this tab have been identified to a Level 4 location, but rather it shows the records grouped to level 4, level 3, level 2 or level 1, depending on the lowest level location information available to group. Some records shown in this table have location information that will allow grouping to Level 3, Level 2, or even only a level 1. This means that there may be multiple rows for each 'Phytopthora~host' combination.

For example, there are some records where the 'Phytopthora~host' combination has a location that can be matched to a WGSRPD level 4, and other records for which that same 'Phytopthora~host' combination has location information that can only match to a WGSRPD level 1. This can be demonstrated by referring to the combination of 'P. pseudosyringae ~ Umbellularia californica' for which there are some records that can be matched to 'California' (Level 4), whilst there are other records that can only be matched to 'Northern America' (Level 1). The reason these particular records can be matched only to 'Northern America' is because the original records described them as being from the United States. There is no WGSRPD level lower than Level 1 'Northern America' to which 'United States' can be matched.

If you wish to establish the total number of records for 'Phytopthora~host' combinations at a particular WGSRPD level, then the 'Global Level' tab corresponding to that level should be viewed. For example, in the above case, if you wished to know the number of records within the current database that relate to 'P. pseudosyringae ~ Umbellularia californica' in North America, then refer to the species table on the 'Global Level 1' tab.

As with 'United Kingdom', there are some instances where other countries do not match to a WGSRPD level, or for which the lowest level match is Level 2, or even Level 1. In particular, consider the following:



```{r, echo=FALSE, warning=FALSE}

ru_num <- read.csv("data/ru_number_rev1.csv", stringsAsFactors = FALSE)
ru_num <- nrow(ru_num)

glob_species_1 <- read.csv("data/countries_WGSRPD.csv", stringsAsFactors = FALSE)
```

```{r new_dat}

kable(glob_species_1) %>%
  kable_styling(position = "left",full_width = F)

```


Whilst records with original locations of 'Russia' and the 'USSR' are not included in these tables because they cannot be matched to even to a WGSRPD of level 1. This currently relates to `r ru_num` records.

There may be additional records within our database that relate to Phytopthora~host combinations displayed in these tables, but for which a WGSRPD match has not been made, ######## either because the location information was unclear and has yet to be matched, or because no location information is available for the record.##### DEPENDS ON WHETHER INCLUDE DATASET 2 .... if include DATASET2 then keep as this, if do not, then it is really just because the location information is unclear.

Whilst significant effort has been made to correctly allocate WGSRPD codes to the records, it is possible that WGSRPD matches made on the basis of a name have been incorrectly matched. An example of of this could be if the the location of a record is given as the name of a country, but the location of the record is actually in an overseas territory of that country. The number of instances of such matches is considered as likely to be low, but should nevertheless be kept in mind.


<br>


```{r host_data, include=FALSE}


glob_species_1 <- read.csv("data/locat_glob_species_level_1_rev1.csv", stringsAsFactors = FALSE)

glob_species_2 <- read.csv("data/locat_glob_species_level_2_rev1.csv", stringsAsFactors = FALSE)

glob_species_3 <- read.csv("data/locat_glob_species_level_3_rev1.csv", stringsAsFactors = FALSE)

glob_species_4 <- read.csv("data/locat_glob_species_level_4_rev1.csv", stringsAsFactors = FALSE)

glob_genus_1 <- read.csv("data/locat_glob_genus_level_1_rev1.csv", stringsAsFactors = FALSE)

glob_genus_2 <- read.csv("data/locat_glob_genus_level_2_rev1.csv", stringsAsFactors = FALSE)

glob_genus_3 <- read.csv("data/locat_glob_genus_level_3_rev1.csv", stringsAsFactors = FALSE)

glob_genus_4 <- read.csv("data/locat_glob_genus_level_4_rev1.csv", stringsAsFactors = FALSE)

uk_species <- read.csv("data/locat_uk_species_rev1.csv", stringsAsFactors = FALSE)

uk_genus <- read.csv("data/locat_uk_genus_rev1.csv", stringsAsFactors = FALSE)

scot_species <- read.csv("data/locat_scot_species_rev1.csv", stringsAsFactors = FALSE)

scot_genus <- read.csv("data/locat_scot_genus_rev1.csv", stringsAsFactors = FALSE)

```

  

```{r}
library(DT)

glob_species_1_dt <- datatable(glob_species_1,
                             rownames = FALSE,
                             colnames = c('Phytophthora', 'Host', 'Level 1', 'Total', 'P~H in Scotland?'),
                              filter = 'top')

glob_species_2_dt <- datatable(glob_species_2,
                             rownames = FALSE,                               
                             filter = 'top')

glob_species_3_dt <- datatable(glob_species_3,
                             rownames = FALSE,                              
                             filter = 'top')

glob_species_4_dt <- datatable(glob_species_4,
                             rownames = FALSE,                               
                             filter = 'top')


glob_genus_1_dt <- datatable(glob_genus_1,
                             rownames = FALSE,                             
                             filter = 'top')

glob_genus_2_dt <- datatable(glob_genus_2,
                             rownames = FALSE,                              
                             filter = 'top')

glob_genus_3_dt <- datatable(glob_genus_3,
                             rownames = FALSE,                              
                             filter = 'top')

glob_genus_4_dt <- datatable(glob_genus_4,
                               rownames = FALSE,                             
                             filter = 'top',
                         #    options = list( columnDefs = list(list(targets = c(6), searchable = FALSE)))
 )
                               

uk_species_dt <- datatable(uk_species,
                             rownames = FALSE)

uk_genus_dt <- datatable(uk_genus,
                             rownames = FALSE)


scot_species_dt <- datatable(scot_species,
                             rownames = FALSE)

scot_genus_dt <- datatable(scot_genus,
                             rownames = FALSE)

```

## {.tabset}

### Scotland{.tabset .col-leftmid .tabset-dropdown}
#### Species 
```{r ,echo = FALSE}
scot_species_dt   
```
#### Genus
```{r ,echo = FALSE}
scot_genus_dt
```
<!-- #### Family  -->
<!-- ```{r ,echo = FALSE} -->
<!-- scot_family_dt -->
<!-- ``` -->
##### {-}

### {-}


### UK{.tabset .col-leftmid .tabset-dropdown}
#### Species 
```{r ,echo = FALSE}
uk_species_dt   
```
#### Genus
```{r ,echo = FALSE}
uk_genus_dt
```
<!-- #### Family  -->
<!-- ```{r ,echo = FALSE} -->
<!-- uk_family_dt -->
<!-- ``` -->
##### {-}

### {-}

### Global Level 4{.tabset .col-leftmid .tabset-dropdown}
#### Species 
```{r ,echo = FALSE}
glob_species_4_dt   
```
#### Genus
```{r ,echo = FALSE}
glob_genus_4_dt
```
##### {-}

### {-}


### Global Level 3{.tabset .col-leftmid .tabset-dropdown}
#### Species 
```{r ,echo = FALSE}
glob_species_3_dt   
```
#### Genus
```{r ,echo = FALSE}
glob_genus_3_dt
```
##### {-}

### {-}


### Global Level 2{.tabset .col-leftmid .tabset-dropdown}
#### Species 
```{r ,echo = FALSE}
glob_species_2_dt   
```
#### Genus
```{r ,echo = FALSE}
glob_genus_2_dt
```
##### {-}

### {-}


### Global Level 1{.tabset .col-leftmid .tabset-dropdown}
#### Species 
```{r ,echo = FALSE}
glob_species_1_dt   
```
#### Genus
```{r ,echo = FALSE}
glob_genus_1_dt
```
##### {-}

### {-}


## {-}




<br>


